{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\fullstack\\\\grass-calculator\\\\grass-calculator\\\\src\\\\components\\\\Konva.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { Stage, Layer, Rect, Text, Group, Arrow, Line } from \"react-konva\";\n\nconst Konva = ({\n  squares,\n  setsquares,\n  type,\n  tabKey,\n  summary,\n  xDirectionSquare,\n  yDirectionSquare,\n  resultForClientPchat,\n  resultPchatWithDirection,\n  resultMinChiburWithDirection,\n  resultMinChiburNoDirection\n}) => {\n  _s();\n\n  const [arrayUsed, setarrayUsed] = useState([]);\n  const [konvasquares, setkonvasquares] = useState(squares);\n  useEffect(() => {\n    if (tabKey === \"מינימום חיבורים + כיוון סיב אחיד בין הגלילים\") {\n      setarrayUsed(resultMinChiburWithDirection);\n    }\n\n    if (tabKey === \"מינימום פחת\") {\n      setarrayUsed(resultForClientPchat);\n    }\n\n    if (tabKey === \"מינימום פחת + כיוון סיב אחיד בין הגלילים\") {\n      setarrayUsed(resultPchatWithDirection);\n    }\n\n    if (tabKey === \"מינימום חיבורים\") {\n      setarrayUsed(resultMinChiburNoDirection);\n    }\n\n    console.log(\"xDirectionSquare : \", xDirectionSquare);\n    console.log(\"yDirectionSquare : \", yDirectionSquare);\n    console.log(\"arrayUsed : \", arrayUsed);\n  }, [tabKey]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Stage, {\n        style: {\n          border: \"1px solid #333\",\n          margin: \"3rem\",\n          borderRadius: \"5px\"\n        },\n        width: window.innerWidth,\n        height: window.innerHeight / 2,\n        children: /*#__PURE__*/_jsxDEV(Layer, {\n          children: [type === \"top\" && squares.map((square, index) => {\n            let width = [];\n            let length = [];\n            let arrowDirection = [];\n\n            if (arrayUsed.length !== 0) {\n              if (arrayUsed[index].opt2.length === square[1] || arrayUsed[index].opt3.length === square[1] || arrayUsed[index].opt4.length === square[1]) {\n                width[index] = arrayUsed[index].opt2.amount * 2 + arrayUsed[index].opt3.amount * 3 + arrayUsed[index].opt4.amount * 4;\n                length[index] = square[1];\n                arrowDirection[index] = \"vertical\";\n              } else if (arrayUsed[index].opt2.length === square[0] || arrayUsed[index].opt3.length === square[0] || arrayUsed[index].opt4.length === square[0]) {\n                width[index] = square[0];\n                length[index] = arrayUsed[index].opt2.amount * 2 + arrayUsed[index].opt3.amount * 3 + arrayUsed[index].opt4.amount * 4;\n                arrowDirection[index] = \"horizantal\";\n              }\n            }\n\n            return /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: /*#__PURE__*/_jsxDEV(Group, {\n                draggable: true,\n                children: [arrowDirection[index] === \"vertical\" && /*#__PURE__*/_jsxDEV(Arrow, {\n                  x: 100,\n                  y: -45,\n                  points: [0, 110, 0, 150],\n                  width: 30,\n                  pointerLength: 5,\n                  pointerWidth: 5,\n                  fill: \"black\",\n                  stroke: \"black\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 87,\n                  columnNumber: 25\n                }, this), arrowDirection[index] === \"horizantal\" && /*#__PURE__*/_jsxDEV(Arrow, {\n                  x: -285,\n                  y: 40,\n                  points: [472, 0, 500, 0],\n                  pointerLength: 5,\n                  pointerWidth: 5,\n                  fill: \"black\",\n                  stroke: \"black\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 100,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(Text, {\n                  x: 120,\n                  y: 200,\n                  text: ` ${square[0]} ר`,\n                  fontSize: 15\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 111,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Text, {\n                  x: 60,\n                  y: 200,\n                  text: ` ${square[1]} א`,\n                  fontSize: 15\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 117,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Rect, {\n                  onClick: e => {\n                    console.log(e.target.absolutePosition());\n                    console.log(e.target);\n                    console.log(\"squares : \", squares);\n                    let squaresOriginal = [...squares];\n                    squaresOriginal[index][3] = e.target.absolutePosition().x;\n                    squaresOriginal[index][4] = e.target.absolutePosition().y;\n                    setkonvasquares(squaresOriginal);\n                  },\n                  x: 50,\n                  y: 100,\n                  width: square[0] * 40,\n                  height: square[1] * 40,\n                  fill: square[2],\n                  opacity: 0.6 // stroke='black'\n                  // strokeWidth='4'\n\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 131,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 21\n              }, this)\n            }, void 0, false);\n          }), type === \"bottom\" && konvasquares.map((square, index) => {\n            let width = [];\n            let length = [];\n            let arrowDirection = []; //4 - 140\n            //3 - 105\n            //2 - 70\n\n            let lineRenderArr = [];\n            let numberRenderArr = [];\n            arrayUsed.forEach(square => {\n              let opt4Amount = +square.opt4.amount;\n              let opt3Amount = +square.opt3.amount;\n              let opt2Amount = +square.opt2.amount;\n              let squareLines = [];\n              let renderedNumbers = [];\n\n              while (opt4Amount > 0) {\n                if (squareLines.length > 0) {\n                  squareLines.push(+squareLines[squareLines.length - 1] + 160);\n                } else {\n                  squareLines.push(160);\n                }\n\n                renderedNumbers.push(4);\n                opt4Amount--;\n              }\n\n              while (opt3Amount > 0) {\n                if (squareLines.length > 0) {\n                  squareLines.push(+squareLines[squareLines.length - 1] + 125);\n                } else {\n                  squareLines.push(125);\n                }\n\n                renderedNumbers.push(3);\n                opt3Amount--;\n              }\n\n              while (opt2Amount > 0) {\n                if (squareLines.length > 0) {\n                  squareLines.push(+squareLines[squareLines.length - 1] + 90);\n                } else {\n                  squareLines.push(90);\n                }\n\n                renderedNumbers.push(2);\n                opt2Amount--;\n              }\n\n              console.log(\"lineRenderArr : \", lineRenderArr);\n              lineRenderArr.push(squareLines);\n              numberRenderArr.push(renderedNumbers);\n            });\n            lineRenderArr.forEach(arr => {\n              arr.pop();\n            });\n\n            if (arrayUsed.length !== 0) {\n              if (arrayUsed[index].opt2.length === square[1] || arrayUsed[index].opt3.length === square[1] || arrayUsed[index].opt4.length === square[1]) {\n                width[index] = arrayUsed[index].opt2.amount * 2 + arrayUsed[index].opt3.amount * 3 + arrayUsed[index].opt4.amount * 4;\n                length[index] = square[1];\n                arrowDirection[index] = \"vertical\";\n              } else if (arrayUsed[index].opt2.length === square[0] || arrayUsed[index].opt3.length === square[0] || arrayUsed[index].opt4.length === square[0]) {\n                width[index] = square[0];\n                length[index] = arrayUsed[index].opt2.amount * 2 + arrayUsed[index].opt3.amount * 3 + arrayUsed[index].opt4.amount * 4;\n                arrowDirection[index] = \"horizantal\";\n              }\n            }\n\n            return /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: /*#__PURE__*/_jsxDEV(Group, {\n                draggable: true,\n                children: [arrowDirection[index] === \"vertical\" && /*#__PURE__*/_jsxDEV(Arrow, {\n                  x: square[3],\n                  y: square[4],\n                  offsetX: -20,\n                  offsetY: 101,\n                  points: [0, 110, 0, 150],\n                  width: 30,\n                  pointerLength: 5,\n                  pointerWidth: 5,\n                  fill: \"black\",\n                  stroke: \"black\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 253,\n                  columnNumber: 25\n                }, this), arrowDirection[index] === \"horizantal\" && /*#__PURE__*/_jsxDEV(Arrow, {\n                  x: square[3],\n                  y: square[4],\n                  offsetY: -30,\n                  points: [20, 0, 50, 0],\n                  pointerLength: 5,\n                  pointerWidth: 5,\n                  fill: \"black\",\n                  stroke: \"black\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 267,\n                  columnNumber: 25\n                }, this), arrowDirection[index] === \"vertical\" && lineRenderArr.length !== 0 && lineRenderArr[index].map(pos => /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(Line, {\n                    x: square[3],\n                    y: square[4],\n                    draggable: true,\n                    points: [pos, 0, pos, 32],\n                    stroke: square[2],\n                    strokeWidth: \"6\",\n                    dash: [10, 10]\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 285,\n                    columnNumber: 29\n                  }, this), lineRenderArr[index].indexOf(pos) + 1 === lineRenderArr[index].length ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(Text, {\n                      x: square[3],\n                      y: square[4],\n                      offsetX: -pos + pos * -0.2,\n                      text: numberRenderArr[index][lineRenderArr[index].indexOf(pos) + 1],\n                      fontSize: 15\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 298,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(Text, {\n                      x: square[3],\n                      y: square[4],\n                      offsetX: -pos / 1.5,\n                      text: numberRenderArr[index][lineRenderArr[index].indexOf(pos)],\n                      fontSize: 15\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 310,\n                      columnNumber: 33\n                    }, this), lineRenderArr[index].forEach(arr => console.log(\"arr : \", arr))]\n                  }, void 0, true) : /*#__PURE__*/_jsxDEV(Text, {\n                    x: square[3],\n                    y: square[4],\n                    offsetX: -pos / 1.5,\n                    text: numberRenderArr[index][lineRenderArr[index].indexOf(pos)],\n                    fontSize: 15\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 339,\n                    columnNumber: 31\n                  }, this)]\n                }, void 0, true)), arrowDirection[index] === \"vertical\" && lineRenderArr[index].length === 0 && /*#__PURE__*/_jsxDEV(Text, {\n                  x: square[3],\n                  y: square[4],\n                  offsetX: -40,\n                  text: arrayUsed[index].opt4.amount > 0 ? \"4\" : arrayUsed[index].opt3.amount > 0 ? \"3\" : arrayUsed[index].opt2.amount > 0 ? \"2\" : null,\n                  fontSize: 15\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 355,\n                  columnNumber: 27\n                }, this), arrowDirection[index] === \"horizantal\" && lineRenderArr.length !== 0 && lineRenderArr[index].map(pos => /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: /*#__PURE__*/_jsxDEV(Group, {\n                    children: [/*#__PURE__*/_jsxDEV(Line, {\n                      x: square[3],\n                      y: square[4],\n                      draggable: true,\n                      points: [0, pos, 32, pos],\n                      stroke: square[2],\n                      strokeWidth: \"6\",\n                      dash: [10, 10]\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 389,\n                      columnNumber: 31\n                    }, this), lineRenderArr[index].indexOf(pos) + 1 === lineRenderArr[index].length ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [/*#__PURE__*/_jsxDEV(Text, {\n                        x: square[3],\n                        y: square[4],\n                        offsetY: -pos - pos * 0.1,\n                        text: numberRenderArr[index][lineRenderArr[index].indexOf(pos) + 1],\n                        fontSize: 15\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 401,\n                        columnNumber: 35\n                      }, this), /*#__PURE__*/_jsxDEV(Text, {\n                        x: square[3],\n                        y: square[4],\n                        offsetY: -pos / 1.5,\n                        text: numberRenderArr[index][lineRenderArr[index].indexOf(pos)],\n                        fontSize: 15\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 413,\n                        columnNumber: 35\n                      }, this)]\n                    }, void 0, true) : /*#__PURE__*/_jsxDEV(Text, {\n                      x: square[3],\n                      y: square[4],\n                      offsetY: -pos / 1.5,\n                      text: numberRenderArr[index][lineRenderArr[index].indexOf(pos)],\n                      fontSize: 15\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 426,\n                      columnNumber: 33\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 388,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false)), arrowDirection[index] === \"horizantal\" && lineRenderArr[index].length === 0 && /*#__PURE__*/_jsxDEV(Text, {\n                  x: square[3],\n                  y: square[4],\n                  offsetX: -40,\n                  text: arrayUsed[index].opt4.amount > 0 ? \"4\" : arrayUsed[index].opt3.amount > 0 ? \"3\" : arrayUsed[index].opt2.amount > 0 ? \"2\" : null,\n                  fontSize: 15\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 443,\n                  columnNumber: 27\n                }, this), arrowDirection[index] === \"horizantal\" && /*#__PURE__*/_jsxDEV(Rect, {\n                  x: square[3] + 60,\n                  y: square[4] - 75,\n                  draggable: true,\n                  stroke: square[2],\n                  strokeWidth: \"2\",\n                  rotationDeg: 132\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 460,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(Rect, {\n                  onClick: e => {\n                    console.log(e.target.absolutePosition());\n                    console.log(e.target);\n                    console.log(\"lineRenderArr : \", lineRenderArr);\n                    console.log(\"squares : \", squares);\n                    let squaresOriginal = [...squares];\n                    squaresOriginal[index][3] = e.target.absolutePosition().x;\n                    squaresOriginal[index][4] = e.target.absolutePosition().y;\n                    setkonvasquares(squaresOriginal);\n                  },\n                  x: square[3],\n                  y: square[4],\n                  width: square[0] * 40,\n                  height: square[1] * 40,\n                  fill: square[2],\n                  opacity: 0.6 // stroke='black'\n                  // strokeWidth='4'\n\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 486,\n                  columnNumber: 23\n                }, this), type === \"bottom\" && /*#__PURE__*/_jsxDEV(Rect, {\n                  draggable: true,\n                  x: square[3],\n                  y: square[4],\n                  width: width[index] * 40,\n                  height: length[index] * 40,\n                  fill: \"transparent\",\n                  stroke: square[2],\n                  draggable: false,\n                  strokeWidth: \"2\",\n                  dash: [10, 10]\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 514,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 250,\n                columnNumber: 21\n              }, this)\n            }, void 0, false);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(Konva, \"PJ47MCXgIbhiMuuu246SkQlECUU=\");\n\n_c = Konva;\nexport default Konva;\n\nvar _c;\n\n$RefreshReg$(_c, \"Konva\");","map":{"version":3,"sources":["C:/fullstack/grass-calculator/grass-calculator/src/components/Konva.js"],"names":["React","useEffect","useState","Stage","Layer","Rect","Text","Group","Arrow","Line","Konva","squares","setsquares","type","tabKey","summary","xDirectionSquare","yDirectionSquare","resultForClientPchat","resultPchatWithDirection","resultMinChiburWithDirection","resultMinChiburNoDirection","arrayUsed","setarrayUsed","konvasquares","setkonvasquares","console","log","border","margin","borderRadius","window","innerWidth","innerHeight","map","square","index","width","length","arrowDirection","opt2","opt3","opt4","amount","e","target","absolutePosition","squaresOriginal","x","y","lineRenderArr","numberRenderArr","forEach","opt4Amount","opt3Amount","opt2Amount","squareLines","renderedNumbers","push","arr","pop","pos","indexOf"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Stage, Layer, Rect, Text, Group, Arrow, Line } from \"react-konva\";\r\n\r\nconst Konva = ({\r\n  squares,\r\n  setsquares,\r\n  type,\r\n  tabKey,\r\n  summary,\r\n  xDirectionSquare,\r\n  yDirectionSquare,\r\n  resultForClientPchat,\r\n  resultPchatWithDirection,\r\n  resultMinChiburWithDirection,\r\n  resultMinChiburNoDirection,\r\n}) => {\r\n  const [arrayUsed, setarrayUsed] = useState([]);\r\n  const [konvasquares, setkonvasquares] = useState(squares);\r\n\r\n  useEffect(() => {\r\n    if (tabKey === \"מינימום חיבורים + כיוון סיב אחיד בין הגלילים\") {\r\n      setarrayUsed(resultMinChiburWithDirection);\r\n    }\r\n    if (tabKey === \"מינימום פחת\") {\r\n      setarrayUsed(resultForClientPchat);\r\n    }\r\n    if (tabKey === \"מינימום פחת + כיוון סיב אחיד בין הגלילים\") {\r\n      setarrayUsed(resultPchatWithDirection);\r\n    }\r\n    if (tabKey === \"מינימום חיבורים\") {\r\n      setarrayUsed(resultMinChiburNoDirection);\r\n    }\r\n    console.log(\"xDirectionSquare : \", xDirectionSquare);\r\n    console.log(\"yDirectionSquare : \", yDirectionSquare);\r\n    console.log(\"arrayUsed : \", arrayUsed);\r\n  }, [tabKey]);\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        <Stage\r\n          style={{\r\n            border: \"1px solid #333\",\r\n            margin: \"3rem\",\r\n            borderRadius: \"5px\",\r\n          }}\r\n          width={window.innerWidth }\r\n          height={window.innerHeight / 2}\r\n        >\r\n          <Layer>\r\n            {type === \"top\" &&\r\n              squares.map((square, index) => {\r\n                let width = [];\r\n                let length = [];\r\n                let arrowDirection = [];\r\n\r\n                if (arrayUsed.length !== 0) {\r\n                  if (\r\n                    arrayUsed[index].opt2.length === square[1] ||\r\n                    arrayUsed[index].opt3.length === square[1] ||\r\n                    arrayUsed[index].opt4.length === square[1]\r\n                  ) {\r\n                    width[index] =\r\n                      arrayUsed[index].opt2.amount * 2 +\r\n                      arrayUsed[index].opt3.amount * 3 +\r\n                      arrayUsed[index].opt4.amount * 4;\r\n                    length[index] = square[1];\r\n                    arrowDirection[index] = \"vertical\";\r\n                  } else if (\r\n                    arrayUsed[index].opt2.length === square[0] ||\r\n                    arrayUsed[index].opt3.length === square[0] ||\r\n                    arrayUsed[index].opt4.length === square[0]\r\n                  ) {\r\n                    width[index] = square[0];\r\n                    length[index] =\r\n                      arrayUsed[index].opt2.amount * 2 +\r\n                      arrayUsed[index].opt3.amount * 3 +\r\n                      arrayUsed[index].opt4.amount * 4;\r\n                    arrowDirection[index] = \"horizantal\";\r\n                  }\r\n                }\r\n\r\n                return (\r\n                  <>\r\n                    <Group draggable>\r\n                      {arrowDirection[index] === \"vertical\" && (\r\n                        <Arrow\r\n                          x={100}\r\n                          y={-45}\r\n                          points={[0, 110, 0, 150]}\r\n                          width={30}\r\n                          pointerLength={5}\r\n                          pointerWidth={5}\r\n                          fill='black'\r\n                          stroke='black'\r\n                        />\r\n                      )}\r\n\r\n                      {arrowDirection[index] === \"horizantal\" && (\r\n                        <Arrow\r\n                          x={-285}\r\n                          y={40}\r\n                          points={[472, 0, 500, 0]}\r\n                          pointerLength={5}\r\n                          pointerWidth={5}\r\n                          fill='black'\r\n                          stroke='black'\r\n                        />\r\n                      )}\r\n\r\n                      <Text\r\n                        x={120}\r\n                        y={200}\r\n                        text={` ${square[0]} ר`}\r\n                        fontSize={15}\r\n                      />\r\n                      <Text\r\n                        x={60}\r\n                        y={200}\r\n                        text={` ${square[1]} א`}\r\n                        fontSize={15}\r\n                      />\r\n                      {/* <Text\r\n                        x={120}\r\n                        y={80}\r\n                        text={`${index + 1}`}\r\n                        fontSize={15}\r\n                        fill={\"black\"}\r\n                      /> */}\r\n\r\n                      <Rect\r\n                        onClick={(e) => {\r\n                          console.log(e.target.absolutePosition());\r\n                          console.log(e.target);\r\n                          console.log(\"squares : \", squares);\r\n                          let squaresOriginal = [...squares];\r\n                          squaresOriginal[\r\n                            index\r\n                          ][3] = e.target.absolutePosition().x;\r\n                          squaresOriginal[\r\n                            index\r\n                          ][4] = e.target.absolutePosition().y;\r\n                          setkonvasquares(squaresOriginal);\r\n                        }}\r\n                        x={50}\r\n                        y={100}\r\n                        width={square[0] * 40}\r\n                        height={square[1] * 40}\r\n                        fill={square[2]}\r\n                        opacity={0.6}\r\n                        // stroke='black'\r\n                        // strokeWidth='4'\r\n                      />\r\n                    </Group>\r\n                  </>\r\n                );\r\n              })}\r\n\r\n            {/* {end of top konva} */}\r\n\r\n            {type === \"bottom\" &&\r\n              konvasquares.map((square, index) => {\r\n                let width = [];\r\n                let length = [];\r\n                let arrowDirection = [];\r\n\r\n                //4 - 140\r\n                //3 - 105\r\n                //2 - 70\r\n                let lineRenderArr = [];\r\n                let numberRenderArr = [];\r\n\r\n                arrayUsed.forEach((square) => {\r\n                  let opt4Amount = +square.opt4.amount;\r\n                  let opt3Amount = +square.opt3.amount;\r\n                  let opt2Amount = +square.opt2.amount;\r\n                  let squareLines = [];\r\n                  let renderedNumbers = [];\r\n\r\n                  while (opt4Amount > 0) {\r\n                    if (squareLines.length > 0) {\r\n                      squareLines.push(\r\n                        +squareLines[squareLines.length - 1] + 160\r\n                      );\r\n                    } else {\r\n                      squareLines.push(160);\r\n                    }\r\n                    renderedNumbers.push(4);\r\n                    opt4Amount--;\r\n                  }\r\n                  while (opt3Amount > 0) {\r\n                    if (squareLines.length > 0) {\r\n                      squareLines.push(\r\n                        +squareLines[squareLines.length - 1] + 125\r\n                      );\r\n                    } else {\r\n                      squareLines.push(125);\r\n                    }\r\n                    renderedNumbers.push(3);\r\n                    opt3Amount--;\r\n                  }\r\n                  while (opt2Amount > 0) {\r\n                    if (squareLines.length > 0) {\r\n                      squareLines.push(\r\n                        +squareLines[squareLines.length - 1] + 90\r\n                      );\r\n                    } else {\r\n                      squareLines.push(90);\r\n                    }\r\n                    renderedNumbers.push(2);\r\n                    opt2Amount--;\r\n                  }\r\n                  console.log(\"lineRenderArr : \", lineRenderArr);\r\n                  lineRenderArr.push(squareLines);\r\n                  numberRenderArr.push(renderedNumbers);\r\n                });\r\n\r\n                lineRenderArr.forEach((arr) => {\r\n                  arr.pop();\r\n                });\r\n\r\n                if (arrayUsed.length !== 0) {\r\n                  if (\r\n                    arrayUsed[index].opt2.length === square[1] ||\r\n                    arrayUsed[index].opt3.length === square[1] ||\r\n                    arrayUsed[index].opt4.length === square[1]\r\n                  ) {\r\n                    width[index] =\r\n                      arrayUsed[index].opt2.amount * 2 +\r\n                      arrayUsed[index].opt3.amount * 3 +\r\n                      arrayUsed[index].opt4.amount * 4;\r\n                    length[index] = square[1];\r\n                    arrowDirection[index] = \"vertical\";\r\n                  } else if (\r\n                    arrayUsed[index].opt2.length === square[0] ||\r\n                    arrayUsed[index].opt3.length === square[0] ||\r\n                    arrayUsed[index].opt4.length === square[0]\r\n                  ) {\r\n                    width[index] = square[0];\r\n                    length[index] =\r\n                      arrayUsed[index].opt2.amount * 2 +\r\n                      arrayUsed[index].opt3.amount * 3 +\r\n                      arrayUsed[index].opt4.amount * 4;\r\n                    arrowDirection[index] = \"horizantal\";\r\n                  }\r\n                }\r\n\r\n                return (\r\n                  <>\r\n                    <Group draggable>\r\n                      {/* {arrow direction } */}\r\n                      {arrowDirection[index] === \"vertical\" && (\r\n                        <Arrow\r\n                          x={square[3]}\r\n                          y={square[4]}\r\n                          offsetX={-20}\r\n                          offsetY={101}\r\n                          points={[0, 110, 0, 150]}\r\n                          width={30}\r\n                          pointerLength={5}\r\n                          pointerWidth={5}\r\n                          fill='black'\r\n                          stroke='black'\r\n                        />\r\n                      )}\r\n                      {arrowDirection[index] === \"horizantal\" && (\r\n                        <Arrow\r\n                          x={square[3]}\r\n                          y={square[4]}\r\n                          offsetY={-30}\r\n                          points={[20, 0, 50, 0]}\r\n                          pointerLength={5}\r\n                          pointerWidth={5}\r\n                          fill='black'\r\n                          stroke='black'\r\n                        />\r\n                      )}\r\n\r\n                      {/* {if arrow direction is vertical} */}\r\n\r\n                      {arrowDirection[index] === \"vertical\" &&\r\n                        lineRenderArr.length !== 0 &&\r\n                        lineRenderArr[index].map((pos) => (\r\n                          <>\r\n                            <Line\r\n                              x={square[3]}\r\n                              y={square[4]}\r\n                              draggable={true}\r\n                              points={[pos, 0, pos, 32]}\r\n                              stroke={square[2]}\r\n                              strokeWidth='6'\r\n                              dash={[10, 10]}\r\n                            ></Line>\r\n\r\n                            {lineRenderArr[index].indexOf(pos) + 1 ===\r\n                            lineRenderArr[index].length ? (\r\n                              <>\r\n                                <Text\r\n                                  x={square[3]}\r\n                                  y={square[4]}\r\n                                  offsetX={-pos + pos * -0.2}\r\n                                  text={\r\n                                    numberRenderArr[index][\r\n                                      lineRenderArr[index].indexOf(pos) + 1\r\n                                    ]\r\n                                  }\r\n                                  fontSize={15}\r\n                                />\r\n\r\n                                <Text\r\n                                  x={square[3]}\r\n                                  y={square[4]}\r\n                                  offsetX={-pos / 1.5}\r\n                                  text={\r\n                                    numberRenderArr[index][\r\n                                      lineRenderArr[index].indexOf(pos)\r\n                                    ]\r\n                                  }\r\n                                  fontSize={15}\r\n                                />\r\n                                {/* {lineRenderArr[index].indexOf(pos) + 1 ===\r\n                                lineRenderArr[index].length\r\n                                  ? (function () {\r\n                                      renderedNumbers.splice(\r\n                                        0,\r\n                                        lineRenderArr[index].length - 1\r\n                                      );\r\n                                      console.log(\r\n                                        \"renderedNumbers !!: \",\r\n                                        renderedNumbers\r\n                                      );\r\n                                    })()\r\n                                  : null} */}\r\n                                {lineRenderArr[index].forEach((arr) =>\r\n                                  console.log(\"arr : \", arr)\r\n                                )}\r\n                              </>\r\n                            ) : (\r\n                              <Text\r\n                                x={square[3]}\r\n                                y={square[4]}\r\n                                offsetX={-pos / 1.5}\r\n                                text={\r\n                                  numberRenderArr[index][\r\n                                    lineRenderArr[index].indexOf(pos)\r\n                                  ]\r\n                                }\r\n                                fontSize={15}\r\n                              />\r\n                            )}\r\n                          </>\r\n                        ))}\r\n                      {arrowDirection[index] === \"vertical\" &&\r\n                        lineRenderArr[index].length === 0 && (\r\n                          <Text\r\n                            x={square[3]}\r\n                            y={square[4]}\r\n                            offsetX={-40}\r\n                            text={\r\n                              arrayUsed[index].opt4.amount > 0\r\n                                ? \"4\"\r\n                                : arrayUsed[index].opt3.amount > 0\r\n                                ? \"3\"\r\n                                : arrayUsed[index].opt2.amount > 0\r\n                                ? \"2\"\r\n                                : null\r\n                            }\r\n                            fontSize={15}\r\n                          />\r\n                        )}\r\n\r\n                      {/* {if arrow direction is horizantal} */}\r\n\r\n                      {arrowDirection[index] === \"horizantal\" &&\r\n                        lineRenderArr.length !== 0 &&\r\n                        lineRenderArr[index].map((pos) => (\r\n                          <>\r\n                            {/* {lineRenderArr[index].indexOf(pos) + 1 ===\r\n                            lineRenderArr[index].length\r\n                              ? (function () {\r\n                                  renderedNumbers.splice(\r\n                                    0,\r\n                                    lineRenderArr[index].length\r\n                                  );\r\n                                })()\r\n                              : null} */}\r\n\r\n                            <Group>\r\n                              <Line\r\n                                x={square[3]}\r\n                                y={square[4]}\r\n                                draggable={true}\r\n                                points={[0, pos, 32, pos]}\r\n                                stroke={square[2]}\r\n                                strokeWidth='6'\r\n                                dash={[10, 10]}\r\n                              ></Line>\r\n                              {lineRenderArr[index].indexOf(pos) + 1 ===\r\n                              lineRenderArr[index].length ? (\r\n                                <>\r\n                                  <Text\r\n                                    x={square[3]}\r\n                                    y={square[4]}\r\n                                    offsetY={-pos - pos * 0.1}\r\n                                    text={\r\n                                      numberRenderArr[index][\r\n                                        lineRenderArr[index].indexOf(pos) + 1\r\n                                      ]\r\n                                    }\r\n                                    fontSize={15}\r\n                                  />\r\n\r\n                                  <Text\r\n                                    x={square[3]}\r\n                                    y={square[4]}\r\n                                    offsetY={-pos / 1.5}\r\n                                    text={\r\n                                      numberRenderArr[index][\r\n                                        lineRenderArr[index].indexOf(pos)\r\n                                      ]\r\n                                    }\r\n                                    fontSize={15}\r\n                                  />\r\n                                </>\r\n                              ) : (\r\n                                <Text\r\n                                  x={square[3]}\r\n                                  y={square[4]}\r\n                                  offsetY={-pos / 1.5}\r\n                                  text={\r\n                                    numberRenderArr[index][\r\n                                      lineRenderArr[index].indexOf(pos)\r\n                                    ]\r\n                                  }\r\n                                  fontSize={15}\r\n                                />\r\n                              )}\r\n                            </Group>\r\n                          </>\r\n                        ))}\r\n                      {arrowDirection[index] === \"horizantal\" &&\r\n                        lineRenderArr[index].length === 0 && (\r\n                          <Text\r\n                            x={square[3]}\r\n                            y={square[4]}\r\n                            offsetX={-40}\r\n                            text={\r\n                              arrayUsed[index].opt4.amount > 0\r\n                                ? \"4\"\r\n                                : arrayUsed[index].opt3.amount > 0\r\n                                ? \"3\"\r\n                                : arrayUsed[index].opt2.amount > 0\r\n                                ? \"2\"\r\n                                : null\r\n                            }\r\n                            fontSize={15}\r\n                          />\r\n                        )}\r\n                      {arrowDirection[index] === \"horizantal\" && (\r\n                        <Rect\r\n                          x={square[3] + 60}\r\n                          y={square[4] - 75}\r\n                          draggable={true}\r\n                          stroke={square[2]}\r\n                          strokeWidth='2'\r\n                          rotationDeg={132}\r\n                        ></Rect>\r\n                      )}\r\n\r\n                      {/* <Text\r\n                        x={square[3]}\r\n                        y={square[4] + 100}\r\n                        text={` ${square[0]} ר`}\r\n                        fontSize={15}\r\n                      />\r\n                      <Text\r\n                        x={square[3]}\r\n                        y={square[4] + 100}\r\n                        text={` ${square[1]} א`}\r\n                        fontSize={15}\r\n                        rotationDeg={270}\r\n                      /> */}\r\n\r\n                      {/* {the original square from top} */}\r\n\r\n                      <Rect\r\n                        onClick={(e) => {\r\n                          console.log(e.target.absolutePosition());\r\n                          console.log(e.target);\r\n                          console.log(\"lineRenderArr : \", lineRenderArr);\r\n                          console.log(\"squares : \", squares);\r\n                          let squaresOriginal = [...squares];\r\n                          squaresOriginal[\r\n                            index\r\n                          ][3] = e.target.absolutePosition().x;\r\n                          squaresOriginal[\r\n                            index\r\n                          ][4] = e.target.absolutePosition().y;\r\n                          setkonvasquares(squaresOriginal);\r\n                        }}\r\n                        x={square[3]}\r\n                        y={square[4]}\r\n                        width={square[0] * 40}\r\n                        height={square[1] * 40}\r\n                        fill={square[2]}\r\n                        opacity={0.6}\r\n                        // stroke='black'\r\n                        // strokeWidth='4'\r\n                      />\r\n\r\n                      {/* {if we are in konva bottom use also square for glilim} */}\r\n\r\n                      {type === \"bottom\" && (\r\n                        <Rect\r\n                          draggable\r\n                          x={square[3]}\r\n                          y={square[4]}\r\n                          width={width[index] * 40}\r\n                          height={length[index] * 40}\r\n                          fill='transparent'\r\n                          stroke={square[2]}\r\n                          draggable={false}\r\n                          strokeWidth='2'\r\n                          dash={[10, 10]}\r\n                        ></Rect>\r\n                      )}\r\n                      {/* {type === \"bottom\" && (\r\n                        <Text\r\n                          x={square[3] - 30}\r\n                          y={square[4] + 100}\r\n                          text={`אורך דשא ${length[index]}`}\r\n                          fontSize={15}\r\n                          fill={\"black\"}\r\n                          rotationDeg={270}\r\n                        />\r\n                      )} */}\r\n                      {/* {type === \"bottom\" && (\r\n                        <Text\r\n                          x={square[3]}\r\n                          y={square[4]}\r\n                          text={`רוחב דשא ${width[index]}`}\r\n                          fontSize={15}\r\n                          fill={\"black\"}\r\n                        />\r\n                      )} */}\r\n                    </Group>\r\n                  </>\r\n                );\r\n              })}\r\n          </Layer>\r\n        </Stage>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Konva;\r\n"]},"metadata":{},"sourceType":"module"}